# 블록체인의 원리

### 목적
 블록체인을 통한 개인학습을 목표로합니다.
 실습 파일은 각각의 폴더로 제작, 이론과 함께 작성하였습니다.
### 기원
 2008 나카모토 사토시
### 블록체인 원리
```
현재 금융 거래 기록들은 VISA. Master Card, 금융기관에 의해 관리되고 있습니다.   
그러나 암호화 화폐의 거래에 있어서 누구나 금융기관의 역할이 가능해집니다.
```
 블록체인 기록을 다운로드 받으면 블록체인 P2P 네트워크의 일원으로서 이 기록을 가진 사람들이 node라고 불리며, 각자가 금융기관의 역할을 하게 됩니다.
 이 node의 과반수 이상이 동의했을 때, 기록으로서 영구정으로 장부에 기록됩니다.
* P2P (Peer-to-Peer) 중앙 서버없이 각 node들이 서로 동등한 입장에서 통신을 하는 네트워크를 말합니다.  (각 node는 서버이면서 크라이언트가 될 수 있습니다.) 
	* [자세한 내용 참조](http://snowdeer.github.io/blockchain/2017/07/04/blockchain-and-p2p/)

### Proof of Work (작업증명)  - 나카모토 사토시[비트코인 창시자]

** 과반수의 합이지만 블록이 생성되는 합의과정에선 가장 많은 work(작업)을 한 node가 어느 기록이 참인지 결정 할 수 있는 권한을 더 많이 갖습니다 **
	* 모든 노드가 공평하지 않다는 이야기 같다.
### 기존과의 차이점
* 기존
	* 거래내역 기록 : 금융기관
	* 방법 : 금융기관 장부에 기록
	* 보상 : 수수료
* 블록체인
	* 거래 내역 기록 : 제3자
	* 방법 : proof of work
	* 보상 : 수수료 (기존보다 저렴) + 코인
### Mining (채굴) ? 
* 작업증명을 통해 블록의 거래 내역을 정리해주고 그 보상으로 코인 + 거래 수수료를 받는 과정을 말합니다.
* 마이너는 거래의 인증자 역할을 합니다.
즉 ,
```
Mining(채굴) = Pow (작업증명) + Reward(보상)
```
* Pow
	* 작업증명 과정은 컴퓨터 연산을 통해 처리됩니다.
	* 연산 과정은 주로 '수학 문제'로 비유됩니다.
** 수학 문제를 가장 빠르고 많이 풀수록 블록에 기록할 권한이 더 많이 부여되고, 보상을 받을 수 있습니다. **

### hashing ?
* 블록에 기록되는 모든 기록이 calculation을 거쳐 1234567890abcdef 16개로 구성된 16진수의 숫자로 ** 암호화 ** 되는 것을 말합니다.
* 해시 값으로부터 기록을 역추적하기 힘들고, 내용을 조금이라도 조작하는 경우는 해시 값 자체가 변하기 때문에 데이터 손상여부를 금방 확인할 수 있습니다.
* 이러한 특성으로 인해 Crupto Currency '암호화 화폐'라고 불립니다.

### 해쉬, 논스 해쉬파워
 암호화 시 'SHA256'라는 해시 함수 프로그램이 사용됩니다.
#### 'A가 B에게 1 비트코인을 전송했다.'
> 비트코인의 경우 1MB로 약 10분에 한 개의 블록이 생성되도록 약속되어 있습니다. 이것을 예로 설명  

이 내용을 블록이 인식됐을 때
1. Nonce라는 무작위 숫자가 SHA256에 대입됩니다.
2. nonce값을 0부터 1씩 반복해 늘려가며 블록이 설정해놓은 특정 해시 값보다 작은 숫자가 나올 때까지 계속 대입 됩니다.
3. Nonce 값을 구하는데 10분이라는 시간이 걸리도록 컴퓨터의 연산 속도에 맞춰서 자동적으로 '난이도'가 설정됩니다.
	* 따라서 Nonce 값을 구하는 것이 작업증명이라고 할 수 있습니다.
4. 블록이 설정한 난이도보다 낮은 숫자를 찾았을 때, 'A가 B에게 1 비트코인을 전송했다'는 -> 'c7bca6309eff3...'로 암호화 되어 블록에 기록되고 작업이 완료 됩니다. (즉, 작업증명 완료)

```
작업증명 시스템에서는  
블록의 난이도가 설정한 숫자보다 작은 숫자를 더 빠르고 많이 찾을 수 있도록 블록체인에 기록하는 과정에서 더 많은 권한이 부여된다.   
연산력(=hash power)이 좋은 컴퓨터를 가질수록 블록의 기록에 더 관여할 수 있게 됩니다.
```

#### 그렇다면 hash power는 무엇일까?
채굴자의 채굴 역량

##### mining Pool
* 개인의 hash power는 약하기 때문에 다수를 상대하기 어려워 POOL을 결성하여 해시파워를 크게 만듦으로써 경쟁에서 우위를 점하려 합니다.

### 위/변조 여부
* 거래내역 위 변조 두가지 조건
	* 해당 블록의 해시 값을 통해 연결된 모든 블록의 정보를 연쇄적으로 다 바꾸어야 한다.
	* 10분에 하나씩 생성되는 블록보다 더 빠르게 위/변조한 정보를 전파시켜야 한다.
		* 실존하는 세계에서 가장 빠른 슈퍼컴퓨터의 성능을 넘는 연산력을 요구하기때문에 현실적으로는 실현이 불가능하다고 합니다.


참조
[쉽게 설명하는 블록체인](https://banksalad.com/contents/%EC%89%BD%EA%B2%8C-%EC%84%A4%EB%AA%85%ED%95%98%EB%8A%94-%EB%B8%94%EB%A1%9D%EC%B2%B4%EC%9D%B8-%EB%B8%94%EB%A1%9D%EC%B2%B4%EC%9D%B8%EC%9D%98-%EC%9B%90%EB%A6%AC-%EC%B1%84%EA%B5%B4-%ED%95%B4%EC%8B%9C-%EA%B7%B8%EB%A6%AC%EA%B3%A0-%EC%9E%91%EC%97%85%EC%A6%9D%EB%AA%85-qvCud)
